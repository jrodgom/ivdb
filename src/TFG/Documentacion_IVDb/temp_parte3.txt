<!-- CONTINUACIÃ“N DEL DOCUMENTO PRINCIPAL - PARTE 3 -->
<!-- Casos de Uso y Modelo de Clases -->

<div style="page-break-before: always;"></div>

<h1 id="subsistemas">DESCRIPCIÃ“N DE LOS SUBSISTEMAS DEL SISTEMA A DESARROLLAR</h1>

<p>El sistema IVDb se divide en cuatro subsistemas principales que agrupan las funcionalidades relacionadas:</p>

<h3>Subsistema 1: GestiÃ³n de Usuarios y AutenticaciÃ³n</h3>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>SS-001</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>GestiÃ³n de Usuarios y AutenticaciÃ³n</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>Este subsistema agrupa los requisitos relacionados con el registro, autenticaciÃ³n y gestiÃ³n de perfiles de usuario. Incluye el sistema de login/logout con JWT, creaciÃ³n de cuentas nuevas y ediciÃ³n de informaciÃ³n personal.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Dependencias</th>
        <td>
            <ul>
                <li>HU-01 (Registro de usuario)</li>
                <li>HU-02 (Inicio de sesiÃ³n)</li>
                <li>HU-08 (GestiÃ³n de perfil)</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Subsistema 2: CatÃ¡logo de Videojuegos</h3>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>SS-002</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>CatÃ¡logo de Videojuegos</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>Este subsistema agrupa los requisitos relacionados con la gestiÃ³n del catÃ¡logo de videojuegos. Incluye bÃºsqueda, filtrado, visualizaciÃ³n de detalles, y operaciones CRUD para administradores. TambiÃ©n maneja la importaciÃ³n automÃ¡tica desde RAWG API.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Dependencias</th>
        <td>
            <ul>
                <li>HU-03 (BÃºsqueda de videojuegos)</li>
                <li>HU-06 (Ver detalles de videojuegos)</li>
                <li>HU-07 (GestiÃ³n de juegos - Admin)</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Subsistema 3: Sistema de ReseÃ±as</h3>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>SS-003</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Sistema de ReseÃ±as</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>Este subsistema agrupa los requisitos relacionados con la creaciÃ³n, ediciÃ³n, eliminaciÃ³n y visualizaciÃ³n de reseÃ±as de usuarios sobre videojuegos. Cada reseÃ±a incluye una puntuaciÃ³n y comentarios.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Dependencias</th>
        <td>
            <ul>
                <li>HU-05 (Escribir reseÃ±as)</li>
                <li>SS-001 (Requiere autenticaciÃ³n)</li>
                <li>SS-002 (ReseÃ±as asociadas a juegos)</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Subsistema 4: Sistema de Favoritos</h3>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>SS-004</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Sistema de Favoritos</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>Este subsistema agrupa los requisitos relacionados con la gestiÃ³n de listas personales de juegos favoritos. Permite a los usuarios marcar y desmarcar juegos para acceso rÃ¡pido.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Dependencias</th>
        <td>
            <ul>
                <li>HU-04 (GestiÃ³n de favoritos)</li>
                <li>SS-001 (Requiere autenticaciÃ³n)</li>
                <li>SS-002 (Favoritos asociados a juegos)</li>
            </ul>
        </td>
    </tr>
</table>

<div style="page-break-before: always;"></div>

<h2 id="casos-uso">Modelo de Casos de Uso del Sistema</h2>

<h3>Diagrama de Casos de Uso General</h3>

<div class="destacado">
    <pre style="font-family: monospace; line-height: 1.6;">
                        SISTEMA IVDb
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                          â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  Registrarse â”‚         â”‚ Iniciar      â”‚            â”‚
    â”‚   â”‚              â”‚         â”‚ SesiÃ³n       â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚                                                          â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  Buscar      â”‚         â”‚  Ver Detalle â”‚            â”‚
    â”‚   â”‚  Juegos      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤  de Juego    â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚         â–²                           â–²                   â”‚
    â”‚         â”‚                           â”‚                   â”‚
    â”‚         â”‚                           â”‚                   â”‚
    Usuario   â”‚                           â”‚   Usuario         â”‚
    AnÃ³nimoâ”€â”€â”€â”˜                           â””â”€â”€â”€Registrado      â”‚
    â”‚                                         â”‚                â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  AÃ±adir a    â”‚         â”‚  Escribir    â”‚            â”‚
    â”‚   â”‚  Favoritos   â”‚         â”‚  ReseÃ±a      â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚         â”‚                           â”‚                   â”‚
    â”‚         â”‚                           â”‚                   â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  Ver Mi      â”‚         â”‚  Editar      â”‚            â”‚
    â”‚   â”‚  Perfil      â”‚         â”‚  Perfil      â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚                                         â”‚                â”‚
    â”‚                                         â”‚                â”‚
    â”‚                                   Administrador         â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  Crear       â”‚         â”‚  Editar      â”‚            â”‚
    â”‚   â”‚  Juego       â”‚         â”‚  Juego       â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚                                                          â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚   â”‚  Eliminar    â”‚         â”‚  Importar    â”‚            â”‚
    â”‚   â”‚  Juego       â”‚         â”‚  desde RAWG  â”‚            â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚                                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>
</div>

<h3>EspecificaciÃ³n de Actores del Sistema</h3>

<table>
    <tr>
        <th style="width: 15%; background-color: #d9d9d9;">ID</th>
        <th style="width: 25%; background-color: #d9d9d9;">Nombre</th>
        <th style="background-color: #d9d9d9;">DescripciÃ³n</th>
    </tr>
    <tr>
        <td><strong>ACT-01</strong></td>
        <td>Usuario AnÃ³nimo</td>
        <td>Este actor representa a los visitantes de la plataforma que no han iniciado sesiÃ³n. Pueden buscar y visualizar informaciÃ³n de videojuegos pero no pueden interactuar con funcionalidades personales (favoritos, reseÃ±as).</td>
    </tr>
    <tr>
        <td><strong>ACT-02</strong></td>
        <td>Usuario Registrado</td>
        <td>Este actor representa a los usuarios que han creado una cuenta y han iniciado sesiÃ³n. Tienen acceso completo a todas las funcionalidades: bÃºsqueda, favoritos, reseÃ±as y gestiÃ³n de perfil.</td>
    </tr>
    <tr>
        <td><strong>ACT-03</strong></td>
        <td>Administrador/Staff</td>
        <td>Este actor representa a los usuarios con permisos especiales de staff. AdemÃ¡s de todas las funcionalidades de usuario registrado, pueden gestionar el catÃ¡logo de juegos (crear, editar, eliminar, importar desde RAWG).</td>
    </tr>
    <tr>
        <td><strong>ACT-04</strong></td>
        <td>Sistema RAWG API</td>
        <td>Este actor representa al sistema externo RAWG API que proporciona informaciÃ³n de videojuegos. InteractÃºa con el sistema mediante peticiones HTTP para importar datos.</td>
    </tr>
</table>

<h3>EspecificaciÃ³n de Casos de Uso del Sistema</h3>

<h4>CU-01: Registrarse en el Sistema</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-01</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Registrarse en el sistema</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario AnÃ³nimo (ACT-01)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para permitir a un visitante crear una nueva cuenta de usuario.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario no debe estar autenticado</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario anÃ³nimo accede a la pÃ¡gina de registro</li>
                <li>El sistema muestra el formulario de registro solicitando: nombre de usuario, email, contraseÃ±a y confirmaciÃ³n de contraseÃ±a</li>
                <li>El usuario introduce sus datos en el formulario</li>
                <li>El usuario hace clic en "Registrarse"</li>
                <li>El sistema valida que todos los campos estÃ©n completos</li>
                <li>El sistema verifica que el nombre de usuario y email no existan ya en la base de datos</li>
                <li>El sistema verifica que las contraseÃ±as coincidan</li>
                <li>El sistema encripta la contraseÃ±a usando PBKDF2</li>
                <li>El sistema crea el usuario en la base de datos</li>
                <li>El sistema crea automÃ¡ticamente un perfil asociado al usuario</li>
                <li>El sistema autentica automÃ¡ticamente al usuario y genera tokens JWT</li>
                <li>El sistema redirige al usuario a la pÃ¡gina principal como usuario autenticado</li>
                <li>El sistema muestra un mensaje de Ã©xito: "Registro completado exitosamente"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>5a.</strong> Si algÃºn campo estÃ¡ vacÃ­o:</p>
            <ul>
                <li>El sistema muestra un mensaje de error indicando los campos requeridos</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
            <p><strong>6a.</strong> Si el nombre de usuario ya existe:</p>
            <ul>
                <li>El sistema muestra error: "Este nombre de usuario ya estÃ¡ en uso"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
            <p><strong>6b.</strong> Si el email ya existe:</p>
            <ul>
                <li>El sistema muestra error: "Este email ya estÃ¡ registrado"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
            <p><strong>7a.</strong> Si las contraseÃ±as no coinciden:</p>
            <ul>
                <li>El sistema muestra error: "Las contraseÃ±as no coinciden"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>Se ha creado un nuevo usuario en el sistema y estÃ¡ autenticado con tokens JWT vÃ¡lidos</td>
    </tr>
</table>

<h4>CU-02: Iniciar SesiÃ³n</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-02</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Iniciar sesiÃ³n en el sistema</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario Registrado (ACT-02)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para autenticar a un usuario existente.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario debe estar registrado previamente y no estar autenticado</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario accede a la pÃ¡gina de login</li>
                <li>El sistema muestra el formulario de login solicitando: nombre de usuario y contraseÃ±a</li>
                <li>El usuario introduce sus credenciales</li>
                <li>El usuario hace clic en "Iniciar SesiÃ³n"</li>
                <li>El sistema valida que ambos campos estÃ©n completos</li>
                <li>El sistema verifica las credenciales contra la base de datos</li>
                <li>El sistema genera un access token JWT (vÃ¡lido 5 minutos)</li>
                <li>El sistema genera un refresh token JWT (vÃ¡lido 1 dÃ­a)</li>
                <li>El sistema devuelve los tokens al frontend</li>
                <li>El frontend almacena los tokens en localStorage</li>
                <li>El sistema redirige al usuario a la pÃ¡gina principal</li>
                <li>El sistema muestra un mensaje de bienvenida con el nombre del usuario</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>5a.</strong> Si algÃºn campo estÃ¡ vacÃ­o:</p>
            <ul>
                <li>El sistema muestra error: "Por favor, completa todos los campos"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
            <p><strong>6a.</strong> Si las credenciales son incorrectas:</p>
            <ul>
                <li>El sistema muestra error: "Usuario o contraseÃ±a incorrectos"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>El usuario estÃ¡ autenticado y tiene tokens JWT vÃ¡lidos almacenados</td>
    </tr>
</table>

<h4>CU-03: Buscar Videojuegos</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-03</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Buscar y filtrar videojuegos</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario AnÃ³nimo (ACT-01), Usuario Registrado (ACT-02), Administrador (ACT-03)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para permitir buscar videojuegos segÃºn diversos criterios.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>Ninguna (accesible para todos los usuarios)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario accede a la pÃ¡gina principal o a la pÃ¡gina de bÃºsqueda</li>
                <li>El sistema muestra una barra de bÃºsqueda y filtros disponibles (gÃ©nero, plataforma)</li>
                <li>El sistema carga y muestra los videojuegos mÃ¡s recientes por defecto</li>
                <li>El usuario introduce un tÃ©rmino de bÃºsqueda en la barra (opcional)</li>
                <li>El usuario selecciona filtros (gÃ©nero, plataforma) - opcional</li>
                <li>El sistema realiza una peticiÃ³n a la API con los parÃ¡metros de bÃºsqueda</li>
                <li>El sistema busca en la base de datos juegos que coincidan con los criterios</li>
                <li>El sistema devuelve los resultados ordenados por relevancia</li>
                <li>El sistema muestra los juegos en formato de tarjetas con: imagen, tÃ­tulo, gÃ©nero y rating</li>
                <li>El usuario puede hacer clic en cualquier juego para ver mÃ¡s detalles</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>7a.</strong> Si no hay resultados que coincidan:</p>
            <ul>
                <li>El sistema muestra mensaje: "No se encontraron juegos con esos criterios"</li>
                <li>El sistema sugiere revisar los filtros aplicados</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>Se muestran los videojuegos que coinciden con los criterios de bÃºsqueda</td>
    </tr>
</table>

<h4>CU-04: Ver Detalle de Videojuego</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-04</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Ver informaciÃ³n detallada de un videojuego</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario AnÃ³nimo (ACT-01), Usuario Registrado (ACT-02), Administrador (ACT-03)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para mostrar toda la informaciÃ³n disponible de un videojuego.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El juego debe existir en la base de datos</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario hace clic en un juego desde la lista de resultados o bÃºsqueda</li>
                <li>El sistema obtiene el ID del juego seleccionado</li>
                <li>El sistema realiza peticiÃ³n GET a <code>/api/games/{id}/</code></li>
                <li>El sistema recupera de la base de datos toda la informaciÃ³n del juego</li>
                <li>El sistema muestra en pantalla:
                    <ul>
                        <li>Imagen de portada grande</li>
                        <li>TÃ­tulo y desarrollador</li>
                        <li>GÃ©nero y plataformas</li>
                        <li>Fecha de lanzamiento</li>
                        <li>DescripciÃ³n completa (HTML sanitizado)</li>
                        <li>PuntuaciÃ³n Metacritic (si disponible)</li>
                        <li>Requisitos mÃ­nimos del sistema (PC)</li>
                        <li>Requisitos recomendados del sistema (PC)</li>
                    </ul>
                </li>
                <li>Si el usuario estÃ¡ autenticado, el sistema muestra botÃ³n "AÃ±adir a Favoritos"</li>
                <li>El sistema carga y muestra las reseÃ±as de otros usuarios para ese juego</li>
                <li>Si el usuario estÃ¡ autenticado, el sistema muestra formulario para escribir reseÃ±a</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>4a.</strong> Si el juego no existe (ID invÃ¡lido):</p>
            <ul>
                <li>El sistema muestra pÃ¡gina 404 "Juego no encontrado"</li>
                <li>El sistema ofrece volver a la bÃºsqueda</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>Se muestra toda la informaciÃ³n del videojuego al usuario</td>
    </tr>
</table>

<h4>CU-05: AÃ±adir Juego a Favoritos</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-05</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Marcar un juego como favorito</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario Registrado (ACT-02), Administrador (ACT-03)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para aÃ±adir un videojuego a la lista de favoritos del usuario.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario debe estar autenticado. El juego no debe estar ya en favoritos del usuario.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario autenticado estÃ¡ visualizando los detalles de un juego</li>
                <li>El sistema muestra el botÃ³n "AÃ±adir a Favoritos" (icono de corazÃ³n vacÃ­o)</li>
                <li>El usuario hace clic en el botÃ³n</li>
                <li>El sistema envÃ­a peticiÃ³n POST a <code>/api/favorites/</code> con el ID del juego</li>
                <li>El sistema valida que el usuario estÃ© autenticado mediante JWT</li>
                <li>El sistema verifica que no exista ya el favorito (usuario + juego)</li>
                <li>El sistema crea un nuevo registro en la tabla Favorite</li>
                <li>El sistema guarda la fecha actual en created_at</li>
                <li>El sistema devuelve respuesta 201 Created con los datos del favorito</li>
                <li>El frontend actualiza el icono a corazÃ³n relleno</li>
                <li>El sistema muestra mensaje: "Juego aÃ±adido a favoritos"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>5a.</strong> Si el usuario no estÃ¡ autenticado:</p>
            <ul>
                <li>El sistema devuelve error 401 Unauthorized</li>
                <li>El frontend redirige al usuario a la pÃ¡gina de login</li>
            </ul>
            <p><strong>6a.</strong> Si el juego ya estÃ¡ en favoritos:</p>
            <ul>
                <li>El sistema devuelve error 400 Bad Request</li>
                <li>El sistema muestra mensaje: "Este juego ya estÃ¡ en tus favoritos"</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>El juego se ha aÃ±adido a la lista de favoritos del usuario</td>
    </tr>
</table>

<h4>CU-06: Escribir ReseÃ±a</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-06</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Crear una reseÃ±a de videojuego</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Usuario Registrado (ACT-02), Administrador (ACT-03)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para permitir a un usuario escribir una reseÃ±a sobre un videojuego.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario debe estar autenticado. El juego debe existir en la base de datos.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El usuario autenticado estÃ¡ visualizando los detalles de un juego</li>
                <li>El sistema muestra el formulario de reseÃ±a con campos: puntuaciÃ³n (1-5 estrellas) y comentario (texto)</li>
                <li>El usuario selecciona una puntuaciÃ³n de 1 a 5 estrellas</li>
                <li>El usuario escribe su comentario en el Ã¡rea de texto</li>
                <li>El usuario hace clic en "Publicar ReseÃ±a"</li>
                <li>El sistema valida que la puntuaciÃ³n estÃ© entre 1 y 5</li>
                <li>El sistema valida que el comentario no estÃ© vacÃ­o</li>
                <li>El sistema envÃ­a POST a <code>/api/reviews/</code> con los datos</li>
                <li>El backend valida la autenticaciÃ³n JWT</li>
                <li>El sistema crea un nuevo registro Review asociando: usuario, juego, rating, comentario</li>
                <li>El sistema guarda la fecha de creaciÃ³n</li>
                <li>El sistema devuelve respuesta 201 Created</li>
                <li>El frontend aÃ±ade la nueva reseÃ±a a la lista visible</li>
                <li>El sistema muestra mensaje: "ReseÃ±a publicada con Ã©xito"</li>
                <li>El sistema limpia el formulario</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>6a.</strong> Si la puntuaciÃ³n es invÃ¡lida (fuera del rango 1-5):</p>
            <ul>
                <li>El sistema muestra error: "Selecciona una puntuaciÃ³n vÃ¡lida"</li>
                <li>El caso de uso continÃºa en el paso 3</li>
            </ul>
            <p><strong>7a.</strong> Si el comentario estÃ¡ vacÃ­o:</p>
            <ul>
                <li>El sistema muestra error: "El comentario no puede estar vacÃ­o"</li>
                <li>El caso de uso continÃºa en el paso 4</li>
            </ul>
            <p><strong>9a.</strong> Si el usuario no estÃ¡ autenticado:</p>
            <ul>
                <li>El sistema devuelve error 401</li>
                <li>El frontend redirige al login</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>Se ha creado una nueva reseÃ±a asociada al usuario y al videojuego</td>
    </tr>
</table>

<h4>CU-07: Gestionar Juegos (Admin)</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-07</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Crear, editar o eliminar videojuegos del catÃ¡logo</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Administrador (ACT-03)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para permitir a administradores gestionar el catÃ¡logo de juegos.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario debe estar autenticado y tener permisos de staff/administrador</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal - Crear Juego</th>
        <td>
            <ol>
                <li>El administrador accede a la pÃ¡gina "AÃ±adir Juego"</li>
                <li>El sistema verifica los permisos de staff</li>
                <li>El sistema muestra formulario con campos: tÃ­tulo, descripciÃ³n, gÃ©nero, plataforma, desarrollador, fecha de lanzamiento, imagen</li>
                <li>El administrador completa todos los campos requeridos</li>
                <li>El administrador hace clic en "Crear Juego"</li>
                <li>El sistema valida que todos los campos obligatorios estÃ©n completos</li>
                <li>El sistema envÃ­a POST a <code>/api/games/</code></li>
                <li>El backend verifica permisos de staff mediante JWT</li>
                <li>El sistema crea el nuevo juego en la base de datos</li>
                <li>El sistema devuelve respuesta 201 Created</li>
                <li>El sistema redirige a la pÃ¡gina de detalle del nuevo juego</li>
                <li>El sistema muestra mensaje: "Juego creado exitosamente"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal - Editar Juego</th>
        <td>
            <ol>
                <li>El administrador visualiza un juego y hace clic en "Editar"</li>
                <li>El sistema carga el formulario con los datos actuales del juego</li>
                <li>El administrador modifica los campos deseados</li>
                <li>El administrador hace clic en "Guardar Cambios"</li>
                <li>El sistema envÃ­a PUT a <code>/api/games/{id}/</code></li>
                <li>El sistema actualiza los datos en la base de datos</li>
                <li>El sistema muestra mensaje: "Juego actualizado correctamente"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal - Eliminar Juego</th>
        <td>
            <ol>
                <li>El administrador visualiza un juego y hace clic en "Eliminar"</li>
                <li>El sistema muestra confirmaciÃ³n: "Â¿EstÃ¡s seguro de eliminar este juego?"</li>
                <li>El administrador confirma la eliminaciÃ³n</li>
                <li>El sistema envÃ­a DELETE a <code>/api/games/{id}/</code></li>
                <li>El sistema elimina el juego y sus relaciones (reseÃ±as, favoritos)</li>
                <li>El sistema redirige a la pÃ¡gina principal</li>
                <li>El sistema muestra mensaje: "Juego eliminado correctamente"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>2a.</strong> Si el usuario no tiene permisos de staff:</p>
            <ul>
                <li>El sistema devuelve error 403 Forbidden</li>
                <li>El sistema muestra mensaje: "No tienes permisos para esta acciÃ³n"</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>El catÃ¡logo de juegos ha sido modificado segÃºn la acciÃ³n realizada</td>
    </tr>
</table>

<h4>CU-08: Importar Juegos desde RAWG</h4>
<table>
    <tr>
        <th style="width: 25%; background-color: #e6e6e6;">ID</th>
        <td>CU-08</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Nombre</th>
        <td>Importar videojuegos desde RAWG API</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Actores</th>
        <td>Administrador (ACT-03), Sistema RAWG API (ACT-04)</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">DescripciÃ³n</th>
        <td>El sistema deberÃ¡ comportarse como se describe en el siguiente caso de uso para importar automÃ¡ticamente juegos desde la API externa de RAWG.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Precondiciones</th>
        <td>El usuario debe ser administrador. La API de RAWG debe estar disponible. Se debe tener una API key vÃ¡lida.</td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Secuencia Normal</th>
        <td>
            <ol>
                <li>El administrador accede a la funcionalidad de importaciÃ³n</li>
                <li>El sistema verifica permisos de staff</li>
                <li>El administrador hace clic en "Importar desde RAWG"</li>
                <li>El sistema realiza peticiÃ³n GET a la API de RAWG con parÃ¡metros (page_size=100)</li>
                <li>RAWG API devuelve un JSON con lista de juegos</li>
                <li>Para cada juego recibido, el sistema:
                    <ul>
                        <li>Verifica si ya existe en la BD (por nombre)</li>
                        <li>Si no existe, realiza peticiÃ³n adicional para obtener requisitos del sistema</li>
                        <li>Crea un nuevo registro Game con toda la informaciÃ³n</li>
                        <li>Guarda la imagen de portada</li>
                    </ul>
                </li>
                <li>El sistema registra cuÃ¡ntos juegos se importaron exitosamente</li>
                <li>El sistema muestra mensaje: "Se importaron X juegos correctamente"</li>
            </ol>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Excepciones</th>
        <td>
            <p><strong>4a.</strong> Si la API de RAWG no responde:</p>
            <ul>
                <li>El sistema muestra error: "No se pudo conectar con RAWG API"</li>
                <li>El proceso se cancela</li>
            </ul>
            <p><strong>4b.</strong> Si la API key es invÃ¡lida:</p>
            <ul>
                <li>El sistema muestra error: "API key no vÃ¡lida"</li>
                <li>El proceso se cancela</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th style="background-color: #e6e6e6;">Postcondiciones</th>
        <td>Se han importado nuevos videojuegos al catÃ¡logo desde RAWG API</td>
    </tr>
</table>

